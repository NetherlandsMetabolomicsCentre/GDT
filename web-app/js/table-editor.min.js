function TableEditor(){}TableEditor.prototype={options:{tableIdentifier:"div.table",headerIdentifier:"div.header",rowIdentifier:"div.row",columnIdentifier:"div.column",initialize:0},tempSelectElement:null,tempSelectValue:"",allSelected:false,init:function(a){var b=this;if(a){$.each(a,function(c,d){b.options[c]=d})}$(this.options.tableIdentifier).each(function(){b.initializeTable($(this))})},initializeTable:function(b){var a=this;this.attachInputElements(b);if($.browser.mozilla){b.bind("click",function(){var c=$("select:focus");if(c.attr("type")){a.tempSelectElement=c;a.tempSelectValue=$("option:selected",c).val()}});b.bind("mouseup",function(){var c=$("select:focus");var e=c.attr("type");if(e){var d=c.parent();var g=c.parent().parent();var f=$("option:selected",c).val();if(a.tempSelectElement&&c[0]==a.tempSelectElement[0]&&a.tempSelectValue!=f){a.replicateData(b,g,d,e,f)}}})}b.selectable({filter:a.options.rowIdentifier,selected:function(c,d){a.cleanup(b);if(!$.browser.mozilla){a.attachSelectElementsInRow(b,d.selected)}},unselected:function(c,d){a.cleanup(b);if(!$.browser.mozilla){a.detachColumnHandler(d.unselected)}}});this.addSelectAllButton(b);this.resizeTableColumns(b)},attachInputElements:function(b){var a=this;b.bind("keyup.tableEditor",function(h){var c=$("input:focus,select:focus");var f=c.attr("type");if(c.attr("type")){var d=c.parent();var i=c.parent().parent();var g=c.val();a.replicateData(b,i,d,f,g)}})},attachSelectElementsInRow:function(b,c){var a=this;$("select",c).each(function(){var d=$(this);var f=d.attr("type");var e=d.parent();var g=d.parent().parent();d.bind("change.tableEditor",function(){var h=$("option:selected",d).val();if(h){a.replicateData(b,g,e,f,h)}})})},detachColumnHandler:function(a){$("select",a).each(function(){$(this).unbind(".tableEditor")})},getColumnNumber:function(d,b){var c=0;var a=0;d.children().each(function(){var e=$(this);if(e[0]==b[0]){a=c}c++});return a},replicateData:function(e,h,c,b,f){var d=this;var a=this.getColumnNumber(h,c);var g="";switch(b){case ("text"):g="input";break;case ("select-one"):g="select";break;default:g="input";break}if(h.hasClass("ui-selected")||h.hasClass("table-editor-selected")){$(".ui-selected, .table-editor-selected",e).each(function(){if($(this)[0]!=h[0]){$(d.options.columnIdentifier+":eq("+(a-1)+") "+g,$(this)).each(function(){$(this).val(f)})}})}},addSelectAllButton:function(c){var b=this;var a=$($(this.options.headerIdentifier+":eq(0)",c).find(":nth-child(1)")[0]);if(a){a.addClass("selectAll").html("&nbsp;&nbsp;&nbsp;").bind("mousedown",function(){b.selectAll(c)});a.qtip({content:"leftMiddle",position:{corner:{tooltip:"leftMiddle",target:"rightMiddle"}},style:{border:{width:5,radius:10},padding:10,textAlign:"center",tip:true,name:"blue"},content:"Click to select all rows in this table",show:"mouseover",hide:"mouseout",api:{beforeShow:function(){}}})}},selectAll:function(b){var a=this;this.cleanup(b);$(this.options.rowIdentifier,b).each(function(){var c=$(this);c.addClass("table-editor-selected");if(!$.browser.mozilla){a.attachSelectElementsInRow(b,c)}});this.allSelected=true},cleanup:function(a){if(this.allSelected){this.deselectAll(a)}},deselectAll:function(b){var a=this;$(this.options.rowIdentifier,b).each(function(){var c=$(this);c.removeClass("table-editor-selected");if(!$.browser.mozilla){a.detachColumnHandler(c)}});this.allSelected=false},resizeTableColumns:function(e){var f=$(this.options.headerIdentifier,e);var d=20;var c=0;var b=[];var a=[];f.children().each(function(){var h=$(this);var g=h.outerWidth(true);d+=g;a[c]=(h.attr("rel")=="resized");b[c]=h.width();c++});f.css({width:d+"px"});$(this.options.rowIdentifier,e).each(function(){var h=$(this);var g=0;h.children().each(function(){var i=$(this);i.css({width:b[g]+"px"});if(a[g]){$(":input",i).each(function(){$(this).css({width:(b[g]-10)+"px"})})}g++});h.css({width:d+"px"})});if(f.width()>e.width()){this.addSlider(e,"before");this.addSlider(e,"after")}},addSlider:function(d,a){var c=this;var e=$(this.options.headerIdentifier,d);var b=$(document.createElement("div"));b.addClass("sliderContainer");if(a=="before"){d.before(b)}else{d.after(b)}b.slider({value:1,min:1,max:e.width()-d.width(),step:1,slide:function(f,g){$(c.options.headerIdentifier+", "+c.options.rowIdentifier,d).css({"margin-left":(1-g.value)+"px"})}})}};