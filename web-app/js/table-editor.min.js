function TableEditor(){}TableEditor.prototype={options:{tableIdentifier:"div.table",headerIdentifier:"div.header",rowIdentifier:"div.row",columnIdentifier:"div.column",selected:null},allSelected:false,init:function(a){var c=this;if(a){$.each(a,function(d,e){c.options[d]=e})}var b=$(this.options.tableIdentifier);if(b){c=this;b.each(function(){c.initializeTable(this)})}},initializeTable:function(d){var c=this;var a=$(d);a.selectable({filter:this.options.rowIdentifier,selected:function(e,f){c.cleanup(a);c.attachColumnHandlers(f.selected)},unselected:function(e,f){c.cleanup(a);c.detachColumnHandlers(f.selected)}});var b=$($(this.options.headerIdentifier+":eq(0)",a).find(":nth-child(1)")[0]);if(b){b.addClass("selectAll").html("&nbsp;&nbsp;&nbsp;").bind("click",function(){c.selectAll(a)});b.qtip({content:"leftMiddle",position:{corner:{tooltip:"leftMiddle",target:"rightMiddle"}},style:{border:{width:5,radius:10},padding:10,textAlign:"center",tip:true,name:"blue"},content:"Click to select all rows in this table",show:"mouseover",hide:"mouseout",api:{beforeShow:function(){}}})}},selectAll:function(b){var a=this;this.cleanup(b);$(this.options.rowIdentifier,b).each(function(){var c=$(this);c.addClass("ui-selected");a.attachColumnHandlers(c)});this.allSelected=true},cleanup:function(a){if(this.allSelected){this.deselectAll(a)}},deselectAll:function(b){var a=this;$(this.options.rowIdentifier,b).each(function(){var c=$(this);c.removeClass("ui-selected");a.detachColumnHandlers(c)});this.allSelected=false},detachColumnHandlers:function(b){var a=this;$(this.options.columnIdentifier,b).each(function(){var c=$(":input",$(this));if(c){$(c).unbind(".tableEditor")}})},attachColumnHandlers:function(d){var c=this;var b=0;var a=new RegExp("ui-autocomplete-input");$(this.options.columnIdentifier,d).each(function(){var e=$(":input",$(this));var h=$(e);var g=h.attr("type");if(e&&g){switch(g){case"text":var f=b;if(a.test(h.attr("class"))){h.bind("autocompleteclose.tableEditor",function(){c.updateSingleInputElements(e,f,"input")})}else{h.bind("keyup.tableEditor",function(){c.updateSingleInputElements(e,f,"input")})}break;case"select-one":var f=b;h.bind("change.tableEditor",function(){c.updateSingleInputElements(e,f,"select");c.handleExtraEvents(h)});break;case"checkbox":var f=b;h.bind("click.tableEditor",function(){c.updateSingleInputElements(e,f,"input")});break;case"hidden":break;case null:break;default:alert("unsupported element of type "+g+", please file a bug report containing this message and a screenshot for table-editor.js");break}}b++})},updateSingleInputElements:function(f,d,b){var g=this;var h=$(f);var i=h.parent();var a=i.parent();var k=a.parent();var j=this.getValue(h);$(".ui-selected",k).each(function(){$(g.options.columnIdentifier+":eq("+d+") "+b,$(this)).each(function(){var c=$(this);if(c.attr("type")!="hidden"){var e=g.getValue(c);if(e!=j){g.setValue(c,j)}}})})},getValue:function(a){var b=$(a);switch(b.attr("type")){case"checkbox":return b.attr("checked");break;default:return b.val();break}},setValue:function(a,c){var b=$(a);switch(b.attr("type")){case"checkbox":return b.attr("checked",c);break;default:return b.val(c);break}},handleExtraEvents:function(element){var events=["change"];for(var i=0;i<events.length;i++){var call=element.attr("tableEditor"+events[i].substr(0,1).toUpperCase()+events[i].substr(1).toLowerCase()+"Event");if(call){eval(call)}}}};